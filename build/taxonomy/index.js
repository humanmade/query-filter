(()=>{"use strict";const e=window.wp.blocks,l=JSON.parse('{"UU":"query-filter/taxonomy"}'),t=window.wp.i18n,o=window.wp.blockEditor,n=window.wp.components,r=window.wp.data,s=window.ReactJSXRuntime;(0,e.registerBlockType)(l.UU,{edit:function({attributes:e,setAttributes:l}){const{taxonomy:a,emptyLabel:i,label:c,showLabel:u,limitToCurrentResults:y}=e,b=(0,r.useSelect)((e=>{const t=(e("core").getTaxonomies({per_page:100})||[]).filter((e=>e.visibility?.publicly_queryable));return t&&t.length>0&&!a&&l({taxonomy:t[0].slug,label:t[0].name}),t}),[a]),m=(0,r.useSelect)((e=>e("core").getEntityRecords("taxonomy",a,{number:50,hide_empty:!0})||[]),[a]),_=(0,o.useBlockProps)({className:"wp-block-query-filter"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.InspectorControls,{children:(0,s.jsxs)(n.PanelBody,{title:(0,t.__)("Taxonomy Settings","query-filter"),children:[(0,s.jsx)(n.SelectControl,{label:(0,t.__)("Select Taxonomy","query-filter"),value:a,options:(b||[]).map((e=>({label:e.name,value:e.slug}))),onChange:e=>{const t=b.find((l=>l.slug===e));l({taxonomy:e,label:t?.name||c})}}),(0,s.jsx)(n.TextControl,{label:(0,t.__)("Label","query-filter"),value:c,help:(0,t.__)("If empty then no label will be shown","query-filter"),onChange:e=>l({label:e})}),(0,s.jsx)(n.ToggleControl,{label:(0,t.__)("Show Label","query-filter"),checked:u,onChange:e=>l({showLabel:e})}),(0,s.jsx)(n.TextControl,{label:(0,t.__)("Empty Choice Label","query-filter"),value:i,placeholder:(0,t.__)("All","query-filter"),onChange:e=>l({emptyLabel:e})}),(0,s.jsx)(n.ToggleControl,{label:(0,t.__)("Only show terms in current results","query-filter"),checked:!!y,onChange:e=>l({limitToCurrentResults:e})})]})}),(0,s.jsxs)("div",{..._,children:[u&&(0,s.jsx)("label",{className:"wp-block-query-filter-taxonomy__label wp-block-query-filter__label",children:c||(0,t.__)("Taxonomy","query-filter")}),(0,s.jsxs)("select",{className:"wp-block-query-filter-taxonomy__select wp-block-query-filter__select",inert:!0,children:[(0,s.jsx)("option",{children:i||(0,t.__)("All","query-filter")}),m.map((e=>(0,s.jsx)("option",{children:e.name},e.slug)))]})]})]})}})})();